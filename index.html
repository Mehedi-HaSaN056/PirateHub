<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PirateHub | The Ultimate Directory</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #facc15;
            --bg: #0f172a;
            --text: #ffffff;
            --card-bg: #1e293b;
            --card-hover: #334155;
            --border: rgba(255, 255, 255, 0.08);
            --footer-bg: #020617;
            --footer-text: #94a3b8;
            --modal-bg: #1e293b;
            --input-bg: rgba(15, 23, 42, 0.5);
        }

        body.light-theme {
            --bg: #f8fafc;
            --text: #0f172a;
            --card-bg: #ffffff;
            --card-hover: #f1f5f9;
            --border: rgba(0, 0, 0, 0.08);
            --footer-bg: #f1f5f9;
            --footer-text: #475569;
            --modal-bg: #ffffff;
            --input-bg: #f1f5f9;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .glass-effect {
            background: var(--bg);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }

        .category-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            display: flex; flex-direction: column;
            height: 100%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 1.5rem;
        }

        .category-card:hover {
            border-color: var(--accent);
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1);
        }

        .link-item { border-radius: 12px; transition: all 0.2s; }
        .link-item:hover { background: var(--card-hover); transform: translateX(4px); }

        .modal-overlay { background: rgba(0, 0, 0, 0.85); backdrop-filter: blur(8px); }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .animate-slide-up { animation: slideUp 0.3s ease-out forwards; }

        footer {
            background-color: var(--footer-bg);
            color: var(--text);
            border-top: 1px solid var(--border);
        }
        .footer-label { color: var(--footer-text); }

        .custom-modal {
            background-color: var(--modal-bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
        
        .custom-input {
            background-color: var(--input-bg);
            color: var(--text);
            border: 1px solid var(--border);
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- Header -->
    <header class="sticky top-0 z-40 glass-effect py-4 px-6">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center justify-between w-full md:w-auto gap-4">
                <div class="flex items-center gap-2 group cursor-pointer" onclick="window.location.reload()">
                    <div class="bg-yellow-400 p-2 rounded-lg text-black transform group-hover:rotate-12 transition-transform">
                        <i class="fas fa-skull-crossbones text-xl"></i>
                    </div>
                    <h1 class="text-2xl font-black tracking-tighter italic uppercase">Pirate<span class="text-yellow-400">Hub</span></h1>
                </div>
                
                <div class="flex items-center gap-2">
                    <button onclick="toggleTheme()" class="p-2 hover:bg-slate-500/10 rounded-full transition-colors" id="themeBtn">
                        <i class="fas fa-moon text-xl text-yellow-400"></i>
                    </button>
                    <button onclick="toggleSubmitModal()" class="md:hidden bg-yellow-400 text-black p-2.5 rounded-xl font-bold hover:bg-yellow-300 transition-all flex items-center justify-center">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div class="relative w-full md:w-[350px]">
                <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" id="searchInput" placeholder="Search resources..." class="w-full bg-slate-800/10 border border-slate-700/50 rounded-2xl py-2.5 pl-12 pr-4 outline-none focus:ring-2 focus:ring-yellow-400/50 transition-all text-inherit">
            </div>

            <nav class="hidden md:flex items-center gap-4">
                <button onclick="toggleSubmitModal()" class="bg-yellow-400 text-black px-6 py-2.5 rounded-2xl font-bold hover:bg-yellow-300 shadow-lg shadow-yellow-400/10 active:scale-95 transition-all">
                    Contribute
                </button>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-6 py-12">
        <div class="mb-12">
            <h2 class="text-4xl md:text-5xl font-black mb-4 tracking-tight">The Most <span class="text-yellow-400">Trusted</span> <br>Link Directory.</h2>
            <p class="footer-label max-w-xl text-lg font-medium">A massive index of verified resources. Curated daily by the community for safety and speed.</p>
        </div>
        <div id="directoryGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
    </main>

    <!-- Detail Modal (The "New Page" Experience) -->
    <div id="detailModal" class="fixed inset-0 z-[110] hidden items-center justify-center p-4 modal-overlay">
        <div class="custom-modal rounded-[2rem] max-w-lg w-full overflow-hidden animate-slide-up shadow-2xl">
            <div id="modalHeader" class="h-40 bg-yellow-400 flex items-center justify-center relative">
                <button onclick="closeModal('detailModal')" class="absolute top-6 right-6 bg-black/20 hover:bg-black/40 text-white w-10 h-10 rounded-full transition-all flex items-center justify-center">
                    <i class="fas fa-times"></i>
                </button>
                <div id="modalIcon" class="bg-slate-900 dark:bg-slate-900 p-6 rounded-3xl text-yellow-400 text-5xl shadow-2xl translate-y-8">
                    <i class="fas fa-link"></i>
                </div>
            </div>
            <div class="p-10 pt-16 text-center">
                <div class="inline-block bg-green-500/10 text-green-500 text-[10px] uppercase tracking-widest px-3 py-1 rounded-full font-black mb-4 border border-green-500/20">
                    <i class="fas fa-check-circle mr-1"></i> Verified Link
                </div>
                <h3 id="modalTitle" class="text-3xl font-black mb-4">Link Title</h3>
                <p id="modalDesc" class="footer-label leading-relaxed mb-8 text-lg font-medium"></p>
                <div class="flex flex-col gap-3">
                    <a id="modalGoBtn" href="" target="_blank" class="w-full bg-yellow-400 text-black font-black py-4 rounded-2xl text-center hover:bg-yellow-300 transition-all flex items-center justify-center gap-2 text-lg shadow-xl shadow-yellow-400/10">
                        Visit Website <i class="fas fa-external-link-alt text-sm"></i>
                    </a>
                    <button onclick="closeModal('detailModal')" class="w-full footer-label font-bold py-3 hover:text-yellow-400 transition-colors">Go Back</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit/Contribute Modal -->
    <div id="reportModal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4 modal-overlay overflow-y-auto">
        <div class="custom-modal p-8 rounded-[2rem] max-w-md w-full animate-slide-up shadow-2xl my-auto">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h3 class="text-3xl font-black">Contribute</h3>
                    <div class="h-1 w-12 bg-yellow-400 mt-2"></div>
                </div>
                <button onclick="closeModal('reportModal')" class="footer-label hover:text-yellow-400 transition-colors">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <form class="space-y-6" id="reportForm" onsubmit="handleForm(event)">
                <div class="space-y-2">
                    <label class="text-[11px] font-black uppercase tracking-[0.2em] footer-label ml-1">Type</label>
                    <select name="type" required class="custom-input w-full rounded-2xl p-4 text-sm outline-none focus:border-yellow-400 transition-all appearance-none cursor-pointer">
                        <option value="Dead Link">Dead Link</option>
                        <option value="New Suggestion" selected>New Suggestion</option>
                        <option value="Malware Warning">Malware Warning</option>
						<option value="Malware Warning">Broken Links</option>
						<option value="Malware Warning">Adds</option>
						<option value="Malware Warning">Phishing Links</option>		
                    </select>
                </div>

                <div class="space-y-2">
                    <label class="text-[11px] font-black uppercase tracking-[0.2em] footer-label ml-1">URL</label>
                    <input type="url" name="url" required placeholder="https://..." class="custom-input w-full rounded-2xl p-4 text-sm outline-none focus:border-yellow-400">
                </div>

                <div class="space-y-2">
                    <label class="text-[11px] font-black uppercase tracking-[0.2em] footer-label ml-1">Your Email</label>
                    <input type="email" name="email" required placeholder="name@example.com" class="custom-input w-full rounded-2xl p-4 text-sm outline-none focus:border-yellow-400">
                </div>

                <button type="submit" id="submitBtn" class="w-full bg-yellow-400 text-black font-black py-5 rounded-2xl hover:bg-yellow-300 transition-all flex items-center justify-center gap-3 text-lg active:scale-[0.98] shadow-lg shadow-yellow-400/20">
                    <span id="btnText">Send Signal</span>
                    <i class="fas fa-paper-plane text-sm"></i>
                </button>

                <p class="text-center text-[10px] footer-label font-bold uppercase tracking-wider opacity-60 pt-4 border-t border-black/5 dark:border-white/5">
                    Submissions are logged to the <span class="text-yellow-400/80">PIRATE_HUB</span> central ledger.
                </p>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div id="messageBox" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-yellow-400 text-black px-10 py-5 rounded-3xl font-black shadow-2xl transition-all duration-500 opacity-0 translate-y-10 pointer-events-none z-[200]">
        SIGNAL RECEIVED.
    </div>

    <!-- Footer Section -->
    <footer class="mt-12 overflow-hidden">
        <div class="max-w-7xl mx-auto px-6 py-12">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-12">
                <!-- System Stats -->
                <div>
                    <h4 class="text-yellow-400 font-black uppercase tracking-widest text-xs mb-6">System Stats</h4>
                    <div class="space-y-4">
                        <p class="footer-label text-sm leading-relaxed">
                            Multi-cluster aggregation system v8.1.<br>
                            Curated by the community for the global subnet.
                        </p>
                        <div class="pt-2">
                           <span class="text-[10px] font-black opacity-40 uppercase tracking-tighter">AUTHORIZED ACCESS ONLY • ALL RIGHTS RESERVED © 2026 <a href="https://mehedi56.netlify.app/">Mehedi Hasan</a></span>
                        </div>
                    </div>
                </div>

                <!-- Security Map -->
                <div>
                    <h4 class="text-yellow-400 font-black uppercase tracking-widest text-xs mb-6">Security Map</h4>
                    <ul class="space-y-3 text-sm font-bold footer-label">
                        <li class="flex items-center gap-2"><i class="fas fa-shield-alt text-green-500 text-[10px]"></i> Encrypted Backbone</li>
                        <li class="flex items-center gap-2"><i class="fas fa-check-double text-green-500 text-[10px]"></i> Verified Sources</li>
                        <li class="flex items-center gap-2"><i class="fas fa-user-shield text-green-500 text-[10px]"></i> Peer Verification</li>
                    </ul>
                </div>

                <!-- Quick Links -->
                <div>
                    <h4 class="text-yellow-400 font-black uppercase tracking-widest text-xs mb-6">Quick Links</h4>
                    <ul class="space-y-3 text-sm font-bold footer-label">
                        <li><a href="#" class="hover:text-yellow-400 transition-colors">Node Application</a></li>
                        <li><a href="#" class="hover:text-yellow-400 transition-colors">Mirror Requests</a></li>
                        <li><a href="#" class="hover:text-yellow-400 transition-colors">DMCA Policy</a></li>
                    </ul>
                </div>

                <!-- Network Health -->
                <div>
                    <h4 class="text-yellow-400 font-black uppercase tracking-widest text-xs mb-6">Network Health</h4>
                    <div class="space-y-4">
                        <div class="flex justify-between items-end">
                            <span class="text-[10px] font-black opacity-50 uppercase">Live Network</span>
                            <span class="text-green-500 text-xs font-black animate-pulse">● ONLINE</span>
                        </div>
                        <div class="bg-black/5 rounded-lg p-3 border border-black/5 dark:bg-white/5 dark:border-white/5">
                            <div class="flex justify-between mb-1">
                                <span class="text-[10px] opacity-50 uppercase">Global Throughput</span>
                                <span class="text-xs font-black text-yellow-400">2.4 PB/day</span>
                            </div>
                            <div class="w-full bg-slate-300 dark:bg-slate-800 h-1 rounded-full overflow-hidden">
                                <div class="bg-yellow-400 h-full w-[85%]"></div>
                            </div>
                        </div>
                        <p class="text-[10px] opacity-50 font-bold italic">All nodes operational [99.98% Uptime]</p>
                    </div>
                </div>
            </div>

            <!-- Disclaimer/Warning (Bangla) -->
            <div class="pt-8 border-t border-black/5 dark:border-white/5 text-center">
                <p class="footer-label text-xs md:text-sm leading-relaxed max-w-4xl mx-auto font-medium italic">
                    <span class="text-yellow-400 font-black uppercase not-italic mr-2">Warning:</span>
                   PirateHub is intended for entertainment and educational purposes only.PirateHub does not host, store, or upload any pirated or copyrighted content.It only provides information and links to third-party websites that are publicly available on the internet.Any actions taken by users are at their own risk, and PirateHub is not responsible for any consequences arising from the use of external links.
                </p>
            </div>
        </div>
    </footer>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxlGcG4rTsR-7Rq4XKSoyJzCxYeChIYTr4zrsZtyXpNAbzHlMlT-R_iUxY5jZG-yjR9/exec";

        const categories = [
            { 
                title: "Movies & TV", 
                icon: "fa-film", 
                links: [
				   { name: "PirateBay", url: "https://www2.thepiratebay3.co/", desc: "Unlimited resource of torrent files" },
				   { name: "PirateBay", url: "https://www.pirateproxy-bay.com/", desc: "Unlimited resource of torrent files" },
                   { name: "FMovies HD", url: "https://fmovies-hd.to/home/", desc: "Clean UI, HD streaming" },
                   { name: "Sflix", url: "https://bflix.sh/home/", desc: "Great for latest series" },
				   { name: "Bflix", url: "https://sflix.ps/movie?page=101", desc: "Great for latest series" },
                   { name: "LookMovie", url: "https://freeonlinehd.site/look-movie/", desc: "No ads, high quality" },
                   { name: "LookMovie (Alt)", url: "https://www.lookmovie2.to/", desc: "No ads, high quality" },
                   { name: "Soap2Day", url: "https://ww25.soap2day.day/soap2day-ctaj3/", desc: "Mirror list maintained" },
                   { name: "MovielinkBD", url: "https://movie0c8.movielinkbd.cfd/", desc: "Mirror list maintained" },
				   { name: "BludCart", url: "https://watch.bludclart.com/", desc: "Mirror list maintained" },
				   { name: "MLWBD", url: "https://freefunz.site/", desc: "Mirror list maintained" },
                   { name: "MLSBD", url: "https://mlsbd.co/", desc: "Mirror list maintained" },
				   { name: "MLFBD", url: "https://mlfbd.best/", desc: "Clean UI, HD streaming" },
				   { name: "MLHBD", url: "https://mlhbd.fun/", desc: "Clean UI, HD streaming" },
				   { name: "FZMovies", url: "https://fzmovie.co.za/", desc: "Mirror list maintained" },
                   { name: "Rtally", url: "https://www.rtally.xyz/home", desc: "Mirror list maintained" },
                   { name: "Pahe.in", url: "https://pahe.ink/", desc: "Mirror list maintained" },
				   { name: "VidBox", url: "https://vidbox.cc/home", desc: "Mirror list maintained" },
				   { name: "NetPlayz", url: "https://netplayz.live/", desc: "Mirror list maintained" },
				   { name: "CinemaPoint", url: "https://bd.cinemonpoint.com/", desc: "Mirror list maintained" },
				   { name: "CinePix", url: "https://cinepix.top/", desc: "Clean UI, HD streaming" },
				   { name: "CineFreak", url: "https://cinefreak.net/", desc: "Clean UI, HD streaming" },
				   { name: "FlixMet", url: "http://flixmet.com/", desc: "Clean UI, HD streaming" },
                   { name: "NotunMovie", url: "https://www.notunmovie.org/category/%E0%A6%AC%E0%A6%BE%E0%A6%82%E0%A6%B2%E0%A6%BE-%E0%A6%AE%E0%A7%81%E0%A6%AD%E0%A6%BF-%E0%A6%A1%E0%A6%BE%E0%A6%89%E0%A6%A8%E0%A6%B2%E0%A7%8B%E0%A6%A1/", desc: "Bangla movies" },
                   { name: "MovieDekhun", url: "https://moviedekhun.store/", desc: "Clean UI, HD streaming" },
                   { name: "FlixBD", url: "https://flixbd.net/", desc: "Clean UI, HD streaming" }
                ] 
            },
            { 
                title: "Anime & Manga", 
                icon: "fa-cat", 
                links: [
                    { name: "AniWave", url: "https://aniwave.to/", desc: "The gold standard for anime fans globally." },
					{ name: "AnieWatch", url: "https://aniwatchtv.to/home", desc: "The gold standard for anime fans globally." },
					{ name: "KissAnime", url: "https://kissanime.cfd/", desc: "The gold standard for anime fans globally." },
					{ name: "AnimeFlix", url: "https://animeflixtv.com/", desc: "The gold standard for anime fans globally." },
					{ name: "Zoroto", url: "https://zoroto.com.in/", desc: "The gold standard for anime fans globally." },
					{ name: "VIZ", url: "https://www.viz.com/", desc: "The gold standard for anime fans globally." },
                    { name: "Nyaa.si", url: "https://nyaa.si/", desc: "The primary source for all raw and subbed anime torrents." },
                    { name: "Mangadex", url: "https://mangadex.org/", desc: "Open-source manga reader with no intrusive ads." },
                    { name: "9Anime", url: "https://9animetv.to/", desc: "Fast servers with both Sub and Dub options." },
                    { name: "AnimePahe", url: "https://animepahe.ru/", desc: "Small file sizes but great quality." },
				    { name: "Kaatoe", url: "https://kaa.to/", desc: "Small file sizes but great quality." },
					{ name: "HiAnime", url: "https://hianime.to/", desc: "Small file sizes but great quality." },
					{ name: "Miruro", url: "https://www.miruro.online/", desc: "Small file sizes but great quality." },
					{ name: "AnimeKai", url: "https://animekai.to/home", desc: "Small file sizes but great quality." },
					{ name: "AniLab (APK)", url: "https://anilab.to/", desc: "Small file sizes but great quality." },
                    { name: "MangaFire", url: "https://mangafire.to/", desc: "Sleek and responsive manga reading interface." }
                ] 
            },
            { 
                title: "Video Games", 
                icon: "fa-gamepad", 
                links: [
                    { name: "FitGirl Repacks", url: "https://fitgirl-repacks.site/", desc: "Incredible compression. Perfect for limited data users." },
                    { name: "DODI Repacks", url: "https://dodi-repacks.site/", desc: "Faster installation speeds than FitGirl." },
					{ name: "SteamUnderground", url: "https://steamunderground.net/", desc: "Faster installation speeds than FitGirl." },
					{ name: "AnkerGames", url: "https://ankergames.net/", desc: "Faster installation speeds than FitGirl." },
                    { name: "SteamRIP", url: "https://steamrip.com/", desc: "Pre-installed games for quick play." },
                    { name: "GOG Games", url: "https://gog-games.to/", desc: "DRM-free versions of your favorite titles." },
                    { name: "SkidrowRel0aded", url: "https://www.skidrowreloaded.com/", desc: "Scene release tracker and links." }
                ] 
            },
            { 
                title: "Books", 
                icon: "fa-book", 
                links: [
                    { name: "Anna's Archive", url: "https://annas-archive.org/", desc: "Shadow library search engine." },
					{ name: "E-Bangla library", url: "https://www.ebanglalibrary.com/", desc: "Shadow library search engine." },
					{ name: "Bangla Book", url: "https://www.banglabook.org/", desc: "Shadow library search engine." },
                    { name: "Z-Library", url: "https://z-lib.org/", desc: "Over 11 million books available." },
                    { name: "LibGen", url: "https://libgen.is/", desc: "Scientific and academic paper database." },
                    { name: "PDF Drive", url: "https://www.pdfdrive.com/", desc: "Search engine for PDF files." },
                    { name: "OceanofPDF", url: "https://oceanofpdf.com/", desc: "Popular site for fiction and non-fiction." }
                ] 
            },
            { 
                title: "Software", 
                icon: "fa-code", 
                links: [
                    { name: "GetIntoPC", url: "https://getintopc.com/", desc: "Full software suites for Windows and Mac." },
                    { name: "FileCR", url: "https://filecr.com/", desc: "Clean and fast repository for desktop apps." },
                    { name: "Ninte", url: "https://ninite.com/", desc: "Install and update all your programs at once." },
                    { name: "PortableApps", url: "https://portableapps.com/", desc: "Software that runs without installation." },
                    { name: "MacDrop", url: "https://macdrop.net/", desc: "The go-to source for MacOS cracked software." },
					{ name: "LiteAPKs", url: "https://liteapks.com/", desc: "The go-to source for MacOS cracked software." },
					{ name: "9Mod", url: "https://9mod.com/", desc: "The go-to source for MacOS cracked software." },
					{ name: "EditFinity", url: "https://t.me/editfinity", desc: "The go-to source for MacOS cracked software." }
					
                ] 
            },
		 { 
                title: "Online Streaming", 
                icon:"fa-play-circle", 
                links: [
                    { name: "MovieBox", url: "https://moviebox.ph/?utm_source=h5seo_www.google.com", desc: "Full Free Straming. Have mod app." },
                    { name: "LokLok", url: "https://www.loklok.com/", desc: "Need to install this app." },
                    { name: "KissKH", url: "https://kisskh.co/", desc: "Best for add free. Also have mod app." },
                    { name: "DramaCool", url: "https://dramacool.asia/", desc: "Shows add." },
                    { name: "KissAsian", url: "https://kissasian.cam/", desc: "Alternative for dramacool." }
                ] 
            }
			
        ];

        let expandedStates = {};

        function renderDirectory(query = "") {
            const grid = document.getElementById('directoryGrid');
            grid.innerHTML = "";
            const filtered = categories.map(cat => ({
                ...cat,
                links: cat.links.filter(l => l.name.toLowerCase().includes(query.toLowerCase()) || cat.title.toLowerCase().includes(query.toLowerCase()))
            })).filter(cat => cat.links.length > 0);

            filtered.forEach(cat => {
                const isExpanded = expandedStates[cat.title] || query.length > 0;
                const linksToShow = isExpanded ? cat.links : cat.links.slice(0, 4);
                const hasMore = cat.links.length > 4;

                const card = document.createElement('div');
                card.className = "category-card p-6";
                card.innerHTML = `
                    <div class="flex items-center gap-4 mb-6">
                        <div class="w-12 h-12 bg-yellow-400 text-black flex items-center justify-center rounded-2xl shadow-xl"><i class="fas ${cat.icon} text-xl"></i></div>
                        <h3 class="text-xl font-black">${cat.title}</h3>
                    </div>
                    <ul class="space-y-1 flex-grow">
                        ${linksToShow.map(link => `
                            <li class="link-item">
                                <button onclick="openLinkDetail('${cat.title}', '${link.name}')" class="w-full text-left p-4 flex justify-between items-center group">
                                    <div class="flex-grow">
                                        <div class="font-bold group-hover:text-yellow-400 transition-colors">${link.name}</div>
                                        <div class="text-[11px] footer-label line-clamp-1 mt-0.5">${link.desc}</div>
                                    </div>
                                    <i class="fas fa-chevron-right text-[10px] opacity-20 group-hover:opacity-100 group-hover:translate-x-1 transition-all"></i>
                                </button>
                            </li>
                        `).join('')}
                    </ul>
                    ${hasMore && !query ? `<button onclick="toggleExpand('${cat.title}')" class="mt-4 w-full py-3 rounded-2xl border-2 border-yellow-400/30 text-xs font-black uppercase hover:border-yellow-400 hover:text-yellow-400 transition-all">${isExpanded ? 'Show Less' : `+ ${cat.links.length - 4} More Resources`}</button>` : ''}
                `;
                grid.appendChild(card);
            });
        }

        function toggleExpand(title) { expandedStates[title] = !expandedStates[title]; renderDirectory(document.getElementById('searchInput').value); }
        function openLinkDetail(catTitle, linkName) {
            const cat = categories.find(c => c.title === catTitle);
            const link = cat.links.find(l => l.name === linkName);
            document.getElementById('modalTitle').innerText = link.name;
            document.getElementById('modalDesc').innerText = link.desc;
            document.getElementById('modalGoBtn').href = link.url;
            document.getElementById('modalIcon').innerHTML = `<i class="fas ${cat.icon}"></i>`;
            const modal = document.getElementById('detailModal');
            modal.classList.remove('hidden'); modal.classList.add('flex');
        }
        function closeModal(id) { const modal = document.getElementById(id); modal.classList.add('hidden'); modal.classList.remove('flex'); }
        function toggleTheme() {
            document.body.classList.toggle('light-theme');
            const isLight = document.body.classList.contains('light-theme');
            document.getElementById('themeBtn').innerHTML = isLight ? '<i class="fas fa-sun text-xl text-yellow-500"></i>' : '<i class="fas fa-moon text-xl text-yellow-400"></i>';
            localStorage.setItem('pirateTheme', isLight ? 'light' : 'dark');
        }
        function toggleSubmitModal() { const modal = document.getElementById('reportModal'); modal.classList.toggle('hidden'); modal.classList.toggle('flex'); }

        async function handleForm(e) {
            e.preventDefault();
            const btn = document.getElementById('submitBtn');
            const btnText = document.getElementById('btnText');
            btn.disabled = true;
            btnText.innerText = "Transmitting...";
            const formData = new FormData(e.target);
            try {
                await fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: formData });
                closeModal('reportModal');
                showNotification();
                e.target.reset();
            } catch (err) {
                btnText.innerText = "Error - Try Again";
            } finally {
                btn.disabled = false;
                btnText.innerText = "Send Signal";
            }
        }

        function showNotification() {
            const msg = document.getElementById('messageBox');
            msg.classList.remove('opacity-0', 'translate-y-10');
            setTimeout(() => msg.classList.add('opacity-0', 'translate-y-10'), 3000);
        }

        window.onclick = (e) => { if (e.target.classList.contains('modal-overlay')) { closeModal('detailModal'); closeModal('reportModal'); } };
        document.getElementById('searchInput').addEventListener('input', (e) => renderDirectory(e.target.value));
        window.onload = () => { if (localStorage.getItem('pirateTheme') === 'light') toggleTheme(); renderDirectory(); };
    </script>
</body>
</html>